name: Test Repo Janitor Action

on:
  workflow_dispatch:
    inputs:
      branch_age_days:
        description: Minimum branch age in days before applying cleanup rules.
        type: number
        default: 7
      desk_check_label:
        description: Label indicating a PR has a desk check and should not be auto-drafted.
        type: string
        default: desk-check
  schedule:
    - cron: "0 2 * * *"

permissions:
  contents: write
  pull-requests: write

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Run Repo Janitor action (local)
        uses: ./
        with:
          branch_age_days: ${{ inputs.branch_age_days || 7 }}
          desk_check_label: ${{ inputs.desk_check_label || 'desk-check' }}
